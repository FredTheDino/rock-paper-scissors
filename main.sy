from love use love
use gfx
use input
use sfx
use gamestate

start :: fn do
    r := 0.

    gs := gamestate.new()
    updates := []
    updates -> list.push' fn delta do
        gs = gamestate.update' gs, delta
    end

    love.update = fn delta do
        updates -> for_each' fn u: fn * -> do u(delta) end
    end

    love.draw = fn do
        gamestate.draw' gs
    end

    love.keypressed = fn key, scancode, repeat do
    end

    love.keyreleased = fn key, scancode do
    end
end
